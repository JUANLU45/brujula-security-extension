# üìù Changelog - Br√∫jula Security Extension

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

---

## [1.0.0] - 2025-10-22

### üéâ Initial Release - ULTRA ROBUSTA

Primera versi√≥n completa de Br√∫jula Security con sistema de protecci√≥n multi-capa y personalizaci√≥n avanzada.

### ‚ú® Added (Funcionalidades Nuevas)

#### üõ°Ô∏è Sistema de Protecci√≥n
- **Detecci√≥n de Typosquatting** - 4 m√©todos combinados:
  - Similitud Levenshtein (>80%)
  - Detecci√≥n de hom√≥grafos (caracteres cir√≠licos/griegos)
  - Detecci√≥n de adiciones de palabras (binance-app.com)
  - Sustituci√≥n de n√∫meros por letras (b1nance.com)
- **Detecci√≥n de sitios cripto desconocidos** - 240 palabras clave
- **Detecci√≥n de conexi√≥n de wallet** - M√∫ltiples proveedores (MetaMask, Trust, Coinbase, Solana)
- **Detecci√≥n de indicadores de scam** - 160 palabras sospechosas
- **Detecci√≥n de TLDs sospechosos** - 15 dominios de alto riesgo (.tk, .ga, .ml, etc.)
- **Detecci√≥n CR√çTICA de seed phrases** - Alerta m√°xima si un sitio solicita frase de recuperaci√≥n
- **Base de datos de sitios verificados** - 107 sitios en 7 categor√≠as:
  - Exchanges (22 sitios)
  - Wallets (14 sitios)
  - DeFi (20 sitios)
  - NFT Marketplaces (9 sitios)
  - Bridges (6 sitios)
  - Analytics (11 sitios)
  - News (7 sitios, incluyendo brujulacrypto.com)

#### ‚öôÔ∏è Sistema de Configuraci√≥n (NUEVO)
- **P√°gina de configuraci√≥n completa** (`src/settings.html`)
  - Interfaz moderna con gradientes y animaciones
  - Accesible desde el popup (abre en nueva pesta√±a)
- **Control de badges**
  - Activar/desactivar indicadores en el icono de la extensi√≥n
  - Badge rojo (!) para amenazas ALTAS
  - Badge amarillo (‚ö†) para amenazas MEDIAS
- **Control de alertas visuales**
  - Activar/desactivar badges verdes y modales rojos/amarillos
  - Opci√≥n para usuarios que prefieren protecci√≥n silenciosa
- **Niveles de alerta configurables**
  - "Todas" (ALTA + MEDIA + BAJA) - M√°xima informaci√≥n
  - "ALTA y MEDIA solamente" - Balance seguridad/comodidad
  - "Solo ALTA" - M√°xima seguridad, m√≠nimas interrupciones
- **Cambio de idioma din√°mico**
  - Espa√±ol ‚Üî English
  - Cambio sin recargar extensi√≥n

#### üõ°Ô∏è Sistema de Whitelist (NUEVO)
- **Lista de sitios confiables personalizada**
  - Guardar sitios que el usuario marca como seguros
  - Almacenamiento local con `chrome.storage.local`
  - Visualizaci√≥n en p√°gina de configuraci√≥n
- **Bot√≥n "Conf√≠o en este sitio"**
  - Aparece en modales rojos (amenazas ALTAS)
  - Agrega el dominio a la whitelist con un click
  - Confirmaci√≥n visual de color verde
- **Gesti√≥n de whitelist**
  - Ver todos los sitios confiables
  - Eliminar sitios individuales
  - Limpiar toda la lista (con confirmaci√≥n)
- **Respeto a la whitelist**
  - Sitios en whitelist nunca muestran alertas
  - Se saltan todos los detectores excepto seed phrase (seguridad cr√≠tica)

#### üé® Sistema de Alertas Visuales
- **Badge verde** (‚úÖ) - Sitios verificados oficialmente
  - Aparece en esquina superior derecha
  - Se auto-oculta despu√©s de 5 segundos
  - Animaci√≥n de fade in/out
- **Modal amarillo** (‚ö†Ô∏è) - Amenazas MEDIAS
  - Sitios cripto desconocidos
  - Conexi√≥n de wallet en sitios no especializados
  - Indicadores de scam (1 palabra)
- **Modal rojo** (üö®) - Amenazas ALTAS
  - Typosquatting detectado
  - Sitios cripto con conexi√≥n wallet
  - M√∫ltiples indicadores de scam (2+)
  - Solicitud de seed phrase (CR√çTICO)

#### üåê Internacionalizaci√≥n Completa
- **96 claves de traducci√≥n** (ES/EN)
- **Mensajes biling√ºes:**
  - Alertas de seguridad
  - Interfaz de popup
  - P√°gina de configuraci√≥n
  - Mensajes educativos
  - Botones y labels
- **Traducciones contextuales**
  - Placeholders din√°micos para nombres de sitios
  - Contadores de amenazas
  - Fechas localizadas

### üîß Technical Improvements

#### Arquitectura
- **Manifest V3** - √öltima versi√≥n de Chrome Extensions API
- **Service Worker persistente** - Background script optimizado
- **Content Scripts modulares**:
  - `levenshtein.js` - Algoritmo de similitud
  - `detector.js` - Motor de detecci√≥n (572 l√≠neas)
  - `alerts.js` - Sistema de UI (327 l√≠neas)
  - `content.js` - Orquestador principal
- **Manejo de errores robusto**
  - Detecci√≥n de "Extension context invalidated"
  - Limpieza de cache en errores
  - Mensajes de advertencia claros

#### Performance
- **Cache de datos JSON**
  - sitios-verificados.json cargado una sola vez
  - palabras-cripto.json cacheado en memoria
- **Early exit en detectores**
  - Whitelist verificada primero
  - Sitios verificados saltan todos los an√°lisis
- **Lazy loading de configuraci√≥n**
  - Settings solo se cargan cuando se usan

#### Seguridad
- **Permisos m√≠nimos**:
  - `activeTab` - Solo pesta√±a activa
  - `storage` - Guardar configuraci√≥n
  - `scripting` - Inyecci√≥n program√°tica
  - `tabs` - Gesti√≥n de pesta√±as
- **web_accessible_resources** con wildcards
  - `icons/*.png`
  - `src/data/*.json`
- **Rutas absolutas** en Service Worker
  - `/icons/logo-16.png` en lugar de relativas

### üì¶ Files Added

#### Core
- `src/settings.html` (322 l√≠neas) - P√°gina de configuraci√≥n
- `src/settings.js` (220 l√≠neas) - L√≥gica de configuraci√≥n

#### Updated
- `src/utils/detector.js` - Agregada funci√≥n `shouldShowAlert()` y respeto a whitelist
- `src/ui/alerts.js` - Agregado bot√≥n "Conf√≠o en este sitio" y verificaci√≥n de configuraci√≥n
- `src/ui/alerts.css` - Agregados estilos `.brujula-btn-trust`
- `src/popup.js` - Agregada redirecci√≥n a settings.html
- `src/content.js` - Mejorado manejo de errores de contexto
- `src/background.js` - Rutas absolutas para iconos
- `_locales/es/messages.json` - +16 claves nuevas (total: 96)
- `_locales/en/messages.json` - +16 claves nuevas (total: 96)
- `src/data/sitios-verificados.json` - Agregado brujulacrypto.com y brujulacripto.com

#### Documentation
- `CHANGELOG.md` (este archivo)
- `README.md` - Actualizado con nuevas funcionalidades
- `docs/VERIFICACION.md` - Actualizado con nuevos features

### üêõ Fixed

- **Extension context invalidated** - Manejo graceful con mensajes claros
- **Rutas de iconos** - Cambiadas a absolutas (`/icons/`) para Service Worker
- **web_accessible_resources** - Wildcards correctos (`*.png`, `*.json`)
- **MutationObserver** - Verificaci√≥n de `document.body` antes de observar
- **Cache de JSON** - Limpieza en errores de contexto

### üéØ User Experience

#### Configuraci√≥n Intuitiva
- **Sin fricci√≥n**: Click en pesta√±a "Configuraci√≥n" abre p√°gina completa
- **Cambios en tiempo real**: Guardar actualiza toda la extensi√≥n inmediatamente
- **Notificaciones visuales**: Confirmaci√≥n verde al guardar
- **Dise√±o moderno**: Gradientes, sombras, animaciones suaves

#### Protecci√≥n Personalizable
- **3 niveles de sensibilidad** para adaptarse a cada usuario
- **Whitelist f√°cil de usar** - Un click para confiar
- **Sin interrupciones innecesarias** si el usuario lo prefiere
- **Educaci√≥n integrada** - Mensajes "¬øSab√≠as que..." en alertas

#### Multiling√ºe Nativo
- **Detecci√≥n autom√°tica** del idioma del navegador
- **Cambio sin fricci√≥n** entre espa√±ol e ingl√©s
- **Traducciones profesionales** - No autom√°ticas

### üìä Statistics

- **Total de archivos**: 18 (vs 15 en versi√≥n anterior)
- **L√≠neas de c√≥digo JavaScript**: ~2,500
- **L√≠neas de CSS**: ~500
- **Traducciones**: 96 √ó 2 idiomas = 192 strings
- **Sitios verificados**: 107
- **Palabras cripto**: 240
- **Indicadores de scam**: 160
- **TLDs sospechosos**: 15
- **M√©todos de detecci√≥n**: 9

### üöÄ Performance Metrics

- **Tiempo de an√°lisis**: <100ms
- **Tama√±o de extensi√≥n**: ~250KB
- **Memoria usada**: <5MB
- **Carga de p√°gina**: 0 impacto perceptible

---

## [Pr√≥ximas Versiones]

### [1.1.0] - Planeado

#### Posibles mejoras futuras:
- **Sincronizaci√≥n en la nube** (opcional) - Whitelist entre dispositivos
- **Reportar sitios falsos** - Sistema comunitario
- **Estad√≠sticas avanzadas** - Gr√°ficos de amenazas bloqueadas
- **Exportar/importar whitelist** - Backup de configuraci√≥n
- **Modo ultra-paranoia** - An√°lisis a√∫n m√°s agresivo

---

**Desarrollado con ‚ù§Ô∏è por el equipo de Br√∫jula Cripto**  
Website: https://brujulacrypto.com  
GitHub: https://github.com/JUANLU45/Brujula-Cripto
